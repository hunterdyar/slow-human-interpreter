<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <link rel="stylesheet" href="https://pyscript.net/releases/2025.5.1/core.css">
        <script type="module" src="https://pyscript.net/releases/2025.5.1/core.js"></script>
        <script type="module" src="./js/print.min.js"></script>
       <style>
            #loading { outline: none; border: none; background: transparent }
            #test-result{
                border: 1px solid black;
            }
            #test-error
            {
                border: 1px solid red;
            }
            section{
                width: 400px;
                margin-left: auto;
                margin-right: auto;
                border: 1px solid black;
                padding-right: .5em;
                padding-left: .5em;
                padding-bottom: .5em;
                margin-bottom: 1em;
            }
            section.main{
                margin-top: 2em;

                display: grid;
                grid-template-columns: 50% 50%;
                grid-template-areas:
                    "hd hd"
                    "text text"
                    "testbutton printbutton"
                    "testResult testResult";
                grid-row-gap: 1em;

                grid-column-gap: .25em;
            }
            .header{
               grid-area: hd;
            }
            h1, h2, h3, h4, h5, h6{
                text-align: center;
            }
            textarea{
                grid-area: text;
            }
            .testButton{
                grid-area: testbutton;
            }
            .printButton{
                grid-area: printbutton;
            }
            #testResult{
                grid-area: testResult;
            }
            button{
                width: 100%
            }
        </style>
        <script type="module">
            const loading = document.getElementById('loading');
            addEventListener('py:ready', () => {loading.close()
            console.log("loaded")});
            loading.showModal();
        </script>

      <title>Slow Human Interpreter</title>
  </head>
  <body>
  <dialog id="loading">
            <h1>Loading...</h1>
    </dialog>
  <section class="main">
      <div class="header">
  <h1>Slow Human Interpreter</h1>
          </div>
            <textarea id="source_field">a = 1+2+3
print(a)</textarea>
      <div class="testButton">
                  <button id="test" py-click="test_form">test</button>
      </div>
      <div class="printButton">
        <button id="print" py-click="submit_form">print instructions</button>
          </div>
        <div id ="testResult">
            hi
        </div>

      </section>
  <section class="about">
      <h3>About</h3>
      <p>This is a computer, but instead of computer do the compute, human do the compute.<p>
  </section>
    <script>
        function printHTMLPage(code){
            var printwin = window.open('','','toolbar=0,scrollbars=0,status=0,dir=ltr');
            printwin.document.write(code)
            printwin.focus()
            printwin.print()
            printwin.close()
        }
        const testResDiv = document.getElementById("testResult")

        function testResult(res, isSuccess){
            clearResult()
            if(isSuccess) {
                console.log(res)
                testResDiv.classList.remove("test-error")
                testResDiv.classList.add("test-result")
                testResDiv.innerText = res
            }else{
                console.error(res)
                testResDiv.classList.remove("test-result")
                testResDiv.classList.add("test-error")
                testResDiv.innerText = res
            }
        }
        function clearResult(){
             testResDiv.innerText = ""
            let ers = document.getElementsByClassName("py-error");
            for (let i = 0; i < ers.length; i++) {
                ers[i].remove()
            }
        }
    </script>
      <script type="py" src="./web/webwrapper.py" config="./pyscript.json"></script>
  </body>
</html>

